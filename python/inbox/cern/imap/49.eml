Received: from CERNMX33.cern.ch (137.138.144.181) by CERNFE20.cern.ch
 (137.138.144.155) with Microsoft SMTP Server (TLS) id 14.2.298.4; Mon, 12 Nov
 2012 15:52:12 +0100
Received: from vocms91.cern.ch (128.142.16.110) by cernmxlb2.cern.ch
 (137.138.144.184) with Microsoft SMTP Server (TLS) id 14.2.318.1; Mon, 12 Nov
 2012 15:51:23 +0100
Received: from vocms91.cern.ch (localhost.localdomain [127.0.0.1])	by
 vocms91.cern.ch (8.13.8/8.13.8) with ESMTP id qACEpNvG030103;	Mon, 12 Nov
 2012 15:51:23 +0100
Received: (from apache@localhost)	by vocms91.cern.ch (8.13.8/8.13.8/Submit) id
 qACEpJp0030096;	Mon, 12 Nov 2012 15:51:19 +0100
Date: Mon, 12 Nov 2012 15:51:19 +0100
X-Authentication-Warning: vocms91.cern.ch: apache set sender to hn-cms-admin@cern.ch using -f
To: <hn-cms-physics-validation@cern.ch>
From: Giovanni Franzoni <giovanni.franzoni@cern.ch>
Errors-To: hn-cms-admin@cern.ch
Content-Type: text/plain; charset="iso-8859-1"
Subject: Re: JetMET view of HCAL laser polluted events in 2012B/C
Message-ID: <CAHmjj8pt7RtjN7NuRV5r6bhGNWtSSPztRkduJ3uD0yT1KHeDgw@mail.gmail.com>
X-Mailer: CMS 1.11-slac-70b
X-Hn-Loop: https://hypernews.cern.ch/HyperNews/CMS/get/physics-validation/1921/1/3/1/2/1/1/3/1/3/1.html
Precedence: list
In-Reply-To: <"/physics-validation/1921/1/3/1/2/1/1/3/1/3"@hypernews.cern.ch>
X-Hn-Forum: https://hypernews.cern.ch/HyperNews/CMS/get/physics-validation.html
Return-Path: hn-cms-admin@cern.ch
X-MS-Exchange-Organization-AuthSource: CERNMX33.cern.ch
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 10
X-MS-Exchange-Organization-AVStamp-Mailbox: MSFTFF;1;0;0 0 0
X-MS-Exchange-Organization-SCL: -1
MIME-Version: 1.0


*** Discussion title: Physics Validation

Thanks, Jeff.

> Thus, if your results on the HcalNZS datasets were made on all events in
> the dataset (with no JSON restriction),

Indeed, the first instance of the plot shown at the PPD meeting was
w/o json filtering.

Looking at your numbers (keeping in mind the different naming
conventions we have been using [1]):

> If I restrict the filter to the latest prompt .json file, I find that
> there are 1430434 events, of which 1429174 are flagged as failing the HF
> laser filter alone, and >>> 1260 fail both HF and HBHE <<< .

> Incidentally, I ran the updated filter (that correctly removes NZS
> digis) on the 2012C HcalNZS dataset, and found that, of the total of
> 2011451 events, 2384 failed the HF laser test, and >>> 449 failed the HBHE <<<
> test. (2 events failed both tests, and I am investigating those events
> now.)

+ within the json (i.e. HF on) 1260 events are classified as
laser-like (also) in HBHE by the filter which is in CMSSW_5_3_4_patch2
+ the newer filter (fixed against the NZS) only flags 449 as laser-like in HBHE

Can you confirm that also in HBHE the NZS was creating false
positives, much alike what happens in HF?

We've spoken with Fabio Cossutti / offline this morning: the fixed
version of the filter will be included in a CMSSW release shortly.  We
plan to re-run over the existing
Run2012[A,B,C]-laserHCALskim_534p2_24Oct2012* skims to determine the
correct sub-set. We're still collecting elements to decide what to do
with the ongoing MultiJet1 processing - we believe we'll have a clear
vision by the PPD of this Wednesday.

Can you confirm that the events list which are now in the CMSSW CVS
are de facto immune of the NZS events problem (you were removing those
in your local area, do I remember correctly)?

Thanks and greetings,
Giovanni - for the PdmV

[1]
"fail a test" = an event IS marked as laser-like
"pass a test" = an event is NOT marked as laser-like

On 11 November 2012 21:44, Jeffrey Temple <jtemple@fnal.gov> wrote:
>
> *** Discussion title: Physics Validation
>
> Hi Giovanni, I've looked at the /HcalNZS/Run2012C-v1/RAW dataset in
> detail. I've found that, of the 2,011,451 events in that dataset, a
> total of 2148 fail both the HF and HBHE filter, and 1990620 fail the HF
> laser but not the HBHE. No events fail only the HBHE filter, and 18683
> events pass both filters. In each of these 18683 events, the number of
> HF digis (and HF calibration digis) per event is 0, indicating that the
> HF was not being read out for those runs/events.
>
> If I restrict the filter to the latest prompt .json file, I find that
> there are 1430434 events, of which 1429174 are flagged as failing the HF
> laser filter alone, and 1260 fail both HF and HBHE. 0 events pass both
> filters, and this is what we expect -- in a non-zero-suppressed event
> with the HF present, the code would automatically reject the event
> because of the number of HF calibration digis.
>
> Thus, if your results on the HcalNZS datasets were made on all events in
> the dataset (with no JSON restriction), I believe I understand why some
> events pass the filter -- if the HF isn't present in the data for some
> bad runs, then there's nothing to cause those events to be identified as
> HF laser events.
>
> Incidentally, I ran the updated filter (that correctly removes NZS
> digis) on the 2012C HcalNZS dataset, and found that, of the total of
> 2011451 events, 2384 failed the HF laser test, and 449 failed the HBHE
> test. (2 events failed both tests, and I am investigating those events
> now.) The remaining 2008616 events in the dataset passed the filter.
>
> Jeff
>
> On Fri, 09 Nov 2012 17:28:22 GMT, Giovanni Franzoni wrote:
>
>> Thanks a lot, Jeff, for the studies and the update.
>>
>> Before we move on to make a detailed plan of follow-up actions -
>> there's one piace of the puzzle which we were discussing privately:
>> why do the datasets /HcalNZS/Run2012[A,B,C]-v1/RAW not have 100%
>> pollution?
>>
>> I suspect the reason might be that there's two HLT paths feeding into
>> those datasets (thanks to A. Bocci for advice!): HLT_HcalNZS_v10 but
>> also HLT_HcalPhiSym_v11, the latter not relating to NZS, and
>> therefore, to first order, all not laser-polluted.
>> Different views on this one?
>>
>> In the picture which is emerging, a new release + an additional pass
>> on all existing skims would do. A bit of time to let things settle and
>> final planning in an ops-type meeting will be beneficial/needed.
>>
>> Ciao,
>> G.
>>
>> On 9 November 2012 18:04, Jeffrey Temple <jtemple@fnal.gov> wrote:
>> >
>> > *** Discussion title: Physics Validation
>> >
>> > Hi all, After discussing this with various experts, I found that the
>> > problem is that the current Hcal laser filter is rejecting HF laser
>> > events based on the number of HF calibration digis, but it is not first
>> > checking whether the digis are present in the event because of a real
>> > signal, or just because the event is non-zero suppressed. The filter is
>> > thus rejecting Hcal non-zero suppressed events (1 out of every 4096
>> > events). I've verified that the event Giovanni mentioned from run 203742
>> > fails the laser filter because it is an NZS event.
>> >
>> > The reason this rejection was not seen in my studies of Hcal noise is
>> > that I was employing a separate NZS filter, and that seems to have
>> > gotten lost in the porting of my filtering code into
>> > EventFilter/HcalRawToDigi/ . I am preparing a fix for that now, and will
>> > pass it to the package managers once I've verified that it works
>> > properly. Once that is done, how do we proceed? Can we simply run the
>> > updated filter on the laserSkim events, and update lists of laser events
>> > accordingly?
>> >
>> > Jeff
>> >
>> > -------------------------------------------------------------
>> > Visit this CMS message (to reply or unsubscribe) at:
>> > https://hypernews.cern.ch/HyperNews/CMS/get/physics-validation/1921/1/3/1/2/1/1/3.html
>>
>> --
>> http://webusers.physics.umn.edu/~franzoni/
>>
>
> -------------------------------------------------------------
> Visit this CMS message (to reply or unsubscribe) at:
> https://hypernews.cern.ch/HyperNews/CMS/get/physics-validation/1921/1/3/1/2/1/1/3/1/3.html

-- 
http://webusers.physics.umn.edu/~franzoni/

-------------------------------------------------------------
Visit this CMS message (to reply or unsubscribe) at: 
https://hypernews.cern.ch/HyperNews/CMS/get/physics-validation/1921/1/3/1/2/1/1/3/1/3/1.html
